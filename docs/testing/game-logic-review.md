# æ¸¸æˆé€»è¾‘å®¡æŸ¥æŠ¥å‘Š

## ğŸ“‹ å®¡æŸ¥èŒƒå›´

- æ‰“ç‰Œè§„åˆ™æ˜¯å¦ç¬¦åˆæ¸¸æˆè§„åˆ™
- å‡ºç‰Œè§„åˆ™å’Œç‰Œå‹åˆ¤æ–­é€»è¾‘
- è®¡åˆ†è§„åˆ™ï¼ˆå¢©ã€ç‚¸å¼¹ã€åˆ†ç‰Œï¼‰
- æ­»å¾ªç¯é£é™©åˆ†æ
- æ¸¸æˆç»“æŸæ¡ä»¶

---

## âœ… 1. æ‰“ç‰Œè§„åˆ™å®¡æŸ¥

### 1.1 ç‰Œå‹è¯†åˆ« âœ…

**è§„åˆ™è¦æ±‚**ï¼š
- å•å¼ ã€å¯¹å­ã€ä¸‰å¼ ï¼šç›¸åŒç‚¹æ•°çš„ç‰Œ
- ç‚¸å¼¹ï¼š4-6å¼ ç›¸åŒç‚¹æ•°
- å¢©ï¼š7å¼ åŠä»¥ä¸Šç›¸åŒç‚¹æ•°
- å¤§å°ç‹ï¼š4å¼ ä»¥ä¸‹åˆ†åˆ«å‡ºï¼Œ4å¼ åŠä»¥ä¸Šå¯ä»¥ä¸€èµ·å‡º

**ä»£ç å®ç°** (`cardUtils.ts:getCardType`):
- âœ… æ­£ç¡®è¯†åˆ«å•å¼ ã€å¯¹å­ã€ä¸‰å¼ 
- âœ… æ­£ç¡®è¯†åˆ«ç‚¸å¼¹ï¼ˆ4-6å¼ ï¼‰
- âœ… æ­£ç¡®è¯†åˆ«å¢©ï¼ˆ7å¼ åŠä»¥ä¸Šï¼‰
- âœ… å¤§å°ç‹ç‰¹æ®Šå¤„ç†ï¼ˆ4å¼ ä»¥ä¸‹åˆ†åˆ«å‡ºï¼‰

**ç»“è®º**ï¼šç‰Œå‹è¯†åˆ«é€»è¾‘æ­£ç¡®ã€‚

---

### 1.2 å‡ºç‰Œè§„åˆ™ï¼ˆå‹ç‰Œè§„åˆ™ï¼‰âœ…

**è§„åˆ™è¦æ±‚**ï¼š
- å¢©å¯ä»¥å‹ä»»ä½•éå¢©ç‰Œå‹
- ç‚¸å¼¹å¯ä»¥å‹ä»»ä½•éç‚¸å¼¹ã€éå¢©ç‰Œå‹
- åŒç±»å‹ç‰Œå‹ï¼šæ•°é‡ç›¸åŒä¸”å€¼æ›´å¤§æ‰èƒ½å‹è¿‡
- å¢©æ¯”è¾ƒï¼šæ•°é‡å¤šçš„èµ¢ï¼Œæ•°é‡ç›¸åŒåˆ™æ¯”è¾ƒå€¼
- ç‚¸å¼¹æ¯”è¾ƒï¼šæ•°é‡å¤šçš„èµ¢ï¼Œæ•°é‡ç›¸åŒåˆ™æ¯”è¾ƒå€¼

**ä»£ç å®ç°** (`cardUtils.ts:canBeat`):
```typescript
// å¢©å¯ä»¥å‹ä»»ä½•éå¢©ç‰Œå‹ âœ…
if (play.type === CardType.DUN && lastPlay.type !== CardType.DUN) {
  return true;
}

// ç‚¸å¼¹å¯ä»¥å‹ä»»ä½•éç‚¸å¼¹ã€éå¢©ç‰Œå‹ âœ…
if (play.type === CardType.BOMB && lastPlay.type !== CardType.BOMB && lastPlay.type !== CardType.DUN) {
  return true;
}

// åŒç±»å‹ç‰Œå‹æ¯”è¾ƒ âœ…
if (play.type === lastPlay.type) {
  // å¢©æ¯”è¾ƒï¼šæ•°é‡å¤šçš„èµ¢ï¼Œæ•°é‡ç›¸åŒåˆ™æ¯”è¾ƒå€¼ âœ…
  // ç‚¸å¼¹æ¯”è¾ƒï¼šæ•°é‡å¤šçš„èµ¢ï¼Œæ•°é‡ç›¸åŒåˆ™æ¯”è¾ƒå€¼ âœ…
  // å…¶ä»–ç‰Œå‹éœ€è¦æ•°é‡ç›¸åŒ âœ…
}
```

**ç»“è®º**ï¼šå‹ç‰Œè§„åˆ™å®ç°æ­£ç¡®ã€‚

---

### 1.3 æ¥é£è§„åˆ™ âš ï¸

**è§„åˆ™è¦æ±‚**ï¼š
- å½“æ‰€æœ‰ç©å®¶éƒ½è¦ä¸èµ·æ—¶ï¼Œæœ€åå‡ºç‰Œçš„äººè·å¾—æœ¬è½®åˆ†æ•°ï¼Œå¹¶å¼€å§‹ä¸‹ä¸€è½®ï¼ˆæ¥é£ï¼‰
- æ¥é£æ—¶å¯ä»¥è‡ªç”±å‡ºä»»ä½•ç‰Œå‹

**ä»£ç å®ç°** (`useMultiPlayerGame.ts`):
- âœ… å½“æœ‰äºº"è¦ä¸èµ·"ä¸” `lastPlayPlayerIndex !== null` æ—¶ï¼Œç»“æŸæœ¬è½®
- âœ… æŠŠåˆ†æ•°ç»™æœ€åå‡ºç‰Œçš„äºº
- âœ… æ¸…ç©º `lastPlay` å’Œ `lastPlayPlayerIndex`ï¼Œå¼€å§‹æ–°è½®æ¬¡
- âœ… æ¥é£æ—¶ `lastPlay === null`ï¼Œå¯ä»¥è‡ªç”±å‡ºç‰Œ

**æ½œåœ¨é—®é¢˜**ï¼š
- âš ï¸ **é—®é¢˜1**ï¼šå¦‚æœæ‰€æœ‰ç©å®¶éƒ½å‡ºå®Œç‰Œäº†ï¼Œä½† `lastPlayPlayerIndex` ä¸º `null`ï¼ˆæ¥é£çŠ¶æ€ï¼‰ï¼Œå¯èƒ½æ— æ³•æ­£ç¡®ç»“æŸæ¸¸æˆ
- âš ï¸ **é—®é¢˜2**ï¼šåœ¨æ¥é£çŠ¶æ€ä¸‹ï¼Œå¦‚æœæ‰€æœ‰å‰©ä½™ç©å®¶éƒ½è¦ä¸èµ·ï¼Œåº”è¯¥å¦‚ä½•å¤„ç†ï¼Ÿç›®å‰ä»£ç å¯èƒ½æ— æ³•æ­£ç¡®å¤„ç†è¿™ç§æƒ…å†µ

**ç»“è®º**ï¼šæ¥é£è§„åˆ™åŸºæœ¬æ­£ç¡®ï¼Œä½†éœ€è¦å¤„ç†è¾¹ç•Œæƒ…å†µã€‚

---

## âœ… 2. è®¡åˆ†è§„åˆ™å®¡æŸ¥

### 2.1 åˆ†ç‰Œè®¡åˆ† âœ…

**è§„åˆ™è¦æ±‚**ï¼š
- 5 = 5åˆ†
- 10 = 10åˆ†
- K = 10åˆ†

**ä»£ç å®ç°** (`cardUtils.ts`):
```typescript
export function getCardScore(card: Card): number {
  if (card.rank === Rank.FIVE) return 5;
  else if (card.rank === Rank.TEN || card.rank === Rank.KING) return 10;
  return 0;
}
```

**ç»“è®º**ï¼šåˆ†ç‰Œè®¡åˆ†æ­£ç¡®ã€‚

---

### 2.2 å¢©çš„è®¡åˆ† âœ…

**è§„åˆ™è¦æ±‚**ï¼š
- 7å¼  = 1å¢©ï¼Œ8å¼  = 2å¢©ï¼Œ9å¼  = 4å¢©ï¼Œ10å¼  = 8å¢©ï¼Œ11å¼  = 16å¢©...ï¼ˆç¿»å€ï¼‰
- æ¯ä¸ªå¢©ä»æ¯ä¸ªå…¶ä»–ç©å®¶æ‰£é™¤30åˆ†
- å‡ºå¢©çš„ç©å®¶å¢åŠ  (å…¶ä»–ç©å®¶æ•° Ã— 30åˆ† Ã— å¢©æ•°)

**ä»£ç å®ç°** (`cardUtils.ts:calculateDunScore`):
```typescript
// 7å¼  = 1å¢© (2^0), 8å¼  = 2å¢© (2^1), 9å¼  = 4å¢© (2^2) âœ…
const exponent = cardCount - 7;
return Math.pow(2, exponent);

// å‡ºå¢©ç©å®¶è·å¾—çš„åˆ†æ•° = å…¶ä»–ç©å®¶æ•° Ã— 30åˆ† Ã— å¢©æ•° âœ…
const dunPlayerScore = otherPlayersCount * scorePerDun * dunCount;

// æ¯ä¸ªå…¶ä»–ç©å®¶æ‰£é™¤çš„åˆ†æ•° = 30åˆ† Ã— å¢©æ•° âœ…
const otherPlayersScore = scorePerDun * dunCount;
```

**ç»“è®º**ï¼šå¢©çš„è®¡åˆ†è§„åˆ™æ­£ç¡®ã€‚

---

### 2.3 è½®æ¬¡åˆ†æ•° âœ…

**è§„åˆ™è¦æ±‚**ï¼š
- åˆ†ç‰Œåˆ†æ•°ç´¯åŠ åˆ°è½®æ¬¡åˆ†æ•°
- å½“æœ‰äºº"è¦ä¸èµ·"æ—¶ï¼Œæœ€åå‡ºç‰Œçš„äººè·å¾—æœ¬è½®æ‰€æœ‰åˆ†æ•°
- ç©å®¶å‡ºå®Œç‰Œæ—¶ï¼Œå¦‚æœæœ¬è½®æœ‰åˆ†æ•°ï¼Œç»™æœ€åå‡ºç‰Œçš„äºº

**ä»£ç å®ç°** (`useMultiPlayerGame.ts`):
- âœ… å‡ºç‰Œæ—¶ç´¯åŠ åˆ†æ•°åˆ° `roundScore`
- âœ… "è¦ä¸èµ·"æ—¶ï¼ŒæŠŠ `roundScore` ç»™ `lastPlayPlayerIndex`
- âœ… ç©å®¶å‡ºå®Œç‰Œæ—¶ï¼Œå¦‚æœæœ¬è½®æœ‰åˆ†æ•°ï¼Œç»™æœ€åå‡ºç‰Œçš„äºº

**ç»“è®º**ï¼šè½®æ¬¡åˆ†æ•°å¤„ç†æ­£ç¡®ã€‚

---

### 2.4 æœ€ç»ˆè®¡åˆ† âœ…

**è§„åˆ™è¦æ±‚**ï¼š
- æœ€åä¸€åå‡å»æœªå‡ºçš„åˆ†ç‰Œåˆ†æ•°
- ç¬¬ä¸€ååŠ ä¸Šæœ€åä¸€åæœªå‡ºçš„åˆ†ç‰Œåˆ†æ•°

**ä»£ç å®ç°** (`useMultiPlayerGame.ts:117-177`):
```typescript
// æœ€åä¸€åå‡å»æœªå‡ºåˆ†ç‰Œçš„åˆ†æ•° âœ…
newPlayers[lastPlayerIndex] = {
  ...lastPlayer,
  score: (lastPlayer.score || 0) - lastPlayerRemainingScore
};

// ç¬¬ä¸€ååŠ ä¸Šæœ€åä¸€åæœªå‡ºçš„åˆ†ç‰Œåˆ†æ•° âœ…
newPlayers[firstPlayerIndex] = {
  ...firstPlayer,
  score: (firstPlayer.score || 0) + lastPlayerRemainingScore
};
```

**ç»“è®º**ï¼šæœ€ç»ˆè®¡åˆ†è§„åˆ™æ­£ç¡®ã€‚

---

## âš ï¸ 3. æ­»å¾ªç¯é£é™©åˆ†æ

### 3.1 "è¦ä¸èµ·"å¾ªç¯ âš ï¸

**é£é™©åœºæ™¯**ï¼š
1. ç©å®¶Aå‡ºç‰Œ
2. ç©å®¶Bè¦ä¸èµ·
3. ç©å®¶Cè¦ä¸èµ·
4. ç©å®¶Dè¦ä¸èµ·
5. å¦‚æœæ‰€æœ‰ç©å®¶éƒ½è¦ä¸èµ·ï¼Œåº”è¯¥ç»“æŸæœ¬è½®

**ä»£ç æ£€æŸ¥** (`useMultiPlayerGame.ts:422-523`):
```typescript
// åªè¦æœ‰äºº"è¦ä¸èµ·"ï¼Œä¸”æœ¬è½®æœ‰å‡ºç‰Œè®°å½•ï¼ˆlastPlayPlayerIndexä¸ä¸ºnullï¼‰ï¼Œåˆ™å¼ºåˆ¶ç»“æŸæœ¬è½® âœ…
if (prev.lastPlayPlayerIndex !== null) {
  // å¼ºåˆ¶ç»“æŸæœ¬è½®ï¼ŒæŠŠåˆ†æ•°ç»™æœ€åå‡ºç‰Œçš„äºº âœ…
  // å¼€å§‹ä¸‹ä¸€è½® âœ…
}
```

**æ½œåœ¨é—®é¢˜**ï¼š
- âš ï¸ **é—®é¢˜1**ï¼šå¦‚æœ `lastPlayPlayerIndex === null`ï¼ˆæ¥é£çŠ¶æ€ï¼‰ï¼Œæ‰€æœ‰ç©å®¶éƒ½è¦ä¸èµ·æ—¶ï¼Œå¯èƒ½æ— æ³•ç»“æŸæœ¬è½®
- âš ï¸ **é—®é¢˜2**ï¼šåœ¨æ¥é£çŠ¶æ€ä¸‹ï¼Œå¦‚æœæ‰€æœ‰å‰©ä½™ç©å®¶éƒ½è¦ä¸èµ·ï¼Œåº”è¯¥å¦‚ä½•å¤„ç†ï¼Ÿ

**ä¿®å¤å»ºè®®**ï¼š
- åœ¨æ¥é£çŠ¶æ€ä¸‹ï¼Œå¦‚æœæ‰€æœ‰å‰©ä½™ç©å®¶éƒ½è¦ä¸èµ·ï¼Œåº”è¯¥å¼ºåˆ¶ç»“æŸæ¸¸æˆæˆ–å¼€å§‹æ–°è½®æ¬¡

---

### 3.2 æ¥é£å¾ªç¯ âš ï¸

**é£é™©åœºæ™¯**ï¼š
1. ç©å®¶Aå‡ºå®Œç‰Œï¼Œæ¥é£
2. ç©å®¶Bè¦ä¸èµ·ï¼ˆæ¥é£çŠ¶æ€ä¸‹ï¼‰
3. ç©å®¶Cè¦ä¸èµ·
4. ç©å®¶Dè¦ä¸èµ·
5. å¦‚æœæ‰€æœ‰å‰©ä½™ç©å®¶éƒ½è¦ä¸èµ·ï¼Œåº”è¯¥å¦‚ä½•å¤„ç†ï¼Ÿ

**ä»£ç æ£€æŸ¥** (`useMultiPlayerGame.ts:494-522`):
```typescript
// å¦‚æœæ²¡æœ‰lastPlayPlayerIndexï¼ˆæ¥é£çŠ¶æ€ï¼‰ï¼Œç»§ç»­æ¸¸æˆ âš ï¸
if (prev.lastPlayPlayerIndex === null) {
  // ç»§ç»­æ¸¸æˆï¼Œä½†å¯èƒ½æ‰€æœ‰ç©å®¶éƒ½è¦ä¸èµ·
  return {
    ...prev,
    currentPlayerIndex: nextPlayerIndex,
    lastPlay: prev.lastPlay, // ä¿æŒlastPlayï¼Œä½†è¿™æ˜¯null
    // ...
  };
}
```

**é—®é¢˜**ï¼š
- âš ï¸ åœ¨æ¥é£çŠ¶æ€ä¸‹ï¼Œå¦‚æœæ‰€æœ‰å‰©ä½™ç©å®¶éƒ½è¦ä¸èµ·ï¼Œ`lastPlay` ä¿æŒä¸º `null`ï¼Œå¯èƒ½å¯¼è‡´æ— é™å¾ªç¯

**ä¿®å¤å»ºè®®**ï¼š
- åœ¨æ¥é£çŠ¶æ€ä¸‹ï¼Œå¦‚æœæ‰€æœ‰å‰©ä½™ç©å®¶éƒ½è¦ä¸èµ·ï¼Œåº”è¯¥å¼ºåˆ¶å¼€å§‹æ–°è½®æ¬¡ï¼ˆç”±ç¬¬ä¸€ä¸ªè¦ä¸èµ·çš„ç©å®¶å¼€å§‹ï¼‰

---

### 3.3 æ¸¸æˆç»“æŸæ¡ä»¶ âœ…

**ä»£ç æ£€æŸ¥** (`useMultiPlayerGame.ts:117-177`):
```typescript
// æ£€æŸ¥æ˜¯å¦åªå‰©ä¸€ä¸ªç©å®¶è¿˜æ²¡å‡ºå®Œ âœ…
const remainingPlayers = currentState.players.filter(p => p.hand.length > 0);
if (remainingPlayers.length === 1) {
  // ç»“æŸæ¸¸æˆ âœ…
  return {
    ...prev,
    status: GameStatus.FINISHED,
    // ...
  };
}
```

**ç»“è®º**ï¼šæ¸¸æˆç»“æŸæ¡ä»¶æ­£ç¡®ã€‚

---

### 3.4 findNextActivePlayer æ­»å¾ªç¯ä¿æŠ¤ âœ…

**ä»£ç æ£€æŸ¥** (`gameStateUtils.ts:31-48`):
```typescript
export function findNextActivePlayer(
  startIndex: number,
  players: Player[],
  playerCount: number
): number {
  let nextPlayerIndex = (startIndex + 1) % playerCount;
  let attempts = 0;
  // è·³è¿‡æ‰€æœ‰å·²å‡ºå®Œçš„ç©å®¶ âœ…
  while (players[nextPlayerIndex].hand.length === 0 && attempts < playerCount) {
    nextPlayerIndex = (nextPlayerIndex + 1) % playerCount;
    attempts++;
  }
  // å¦‚æœæ‰€æœ‰ç©å®¶éƒ½å‡ºå®Œäº†ï¼Œè¿”å›startIndexï¼ˆä¿æŠ¤ï¼‰ âœ…
  if (attempts >= playerCount) {
    return startIndex;
  }
  return nextPlayerIndex;
}
```

**ç»“è®º**ï¼šæœ‰æ­»å¾ªç¯ä¿æŠ¤ï¼Œä½†å¦‚æœæ‰€æœ‰ç©å®¶éƒ½å‡ºå®Œäº†ï¼Œåº”è¯¥ç›´æ¥ç»“æŸæ¸¸æˆï¼Œè€Œä¸æ˜¯è¿”å› `startIndex`ã€‚

---

## ğŸ”§ 4. ä¿®å¤å»ºè®®

### 4.1 æ¥é£çŠ¶æ€ä¸‹çš„"è¦ä¸èµ·"å¤„ç†

**é—®é¢˜**ï¼šåœ¨æ¥é£çŠ¶æ€ä¸‹ï¼Œå¦‚æœæ‰€æœ‰å‰©ä½™ç©å®¶éƒ½è¦ä¸èµ·ï¼Œå¯èƒ½å¯¼è‡´æ— é™å¾ªç¯ã€‚

**ä¿®å¤æ–¹æ¡ˆ**ï¼š
```typescript
// åœ¨ useMultiPlayerGame.ts çš„ playerPass å’Œ AI "è¦ä¸èµ·" å¤„ç†ä¸­
if (prev.lastPlayPlayerIndex === null) {
  // æ¥é£çŠ¶æ€ä¸‹ï¼Œå¦‚æœæ‰€æœ‰å‰©ä½™ç©å®¶éƒ½è¦ä¸èµ·ï¼Œåº”è¯¥å¼ºåˆ¶å¼€å§‹æ–°è½®æ¬¡
  // ç”±ç¬¬ä¸€ä¸ªè¦ä¸èµ·çš„ç©å®¶å¼€å§‹ï¼ˆæˆ–è€…ç”±ä¸‹ä¸€ä¸ªè¿˜åœ¨æ¸¸æˆä¸­çš„ç©å®¶å¼€å§‹ï¼‰
  const allRemainingPlayersPassed = checkAllRemainingPlayersPassed(
    prev.currentPlayerIndex,
    prev.players,
    prev.playerCount
  );
  
  if (allRemainingPlayersPassed) {
    // å¼ºåˆ¶å¼€å§‹æ–°è½®æ¬¡ï¼Œç”±å½“å‰ç©å®¶å¼€å§‹
    return {
      ...prev,
      currentPlayerIndex: prev.currentPlayerIndex, // ç”±å½“å‰ç©å®¶å¼€å§‹æ–°è½®æ¬¡
      lastPlay: null,
      lastPlayPlayerIndex: null,
      roundScore: 0,
      currentRoundPlays: [],
      roundNumber: prev.roundNumber + 1
    };
  }
}
```

---

### 4.2 findNextActivePlayer æ”¹è¿›

**é—®é¢˜**ï¼šå¦‚æœæ‰€æœ‰ç©å®¶éƒ½å‡ºå®Œäº†ï¼Œè¿”å› `startIndex` å¯èƒ½å¯¼è‡´é—®é¢˜ã€‚

**ä¿®å¤æ–¹æ¡ˆ**ï¼š
```typescript
export function findNextActivePlayer(
  startIndex: number,
  players: Player[],
  playerCount: number
): number | null { // è¿”å› null è¡¨ç¤ºæ‰€æœ‰ç©å®¶éƒ½å‡ºå®Œäº†
  let nextPlayerIndex = (startIndex + 1) % playerCount;
  let attempts = 0;
  
  while (players[nextPlayerIndex].hand.length === 0 && attempts < playerCount) {
    nextPlayerIndex = (nextPlayerIndex + 1) % playerCount;
    attempts++;
  }
  
  // å¦‚æœæ‰€æœ‰ç©å®¶éƒ½å‡ºå®Œäº†ï¼Œè¿”å› null
  if (attempts >= playerCount) {
    return null; // è°ƒç”¨è€…åº”è¯¥æ£€æŸ¥å¹¶ç»“æŸæ¸¸æˆ
  }
  
  return nextPlayerIndex;
}
```

---

### 4.3 æ·»åŠ "æ‰€æœ‰ç©å®¶éƒ½è¦ä¸èµ·"çš„æ£€æµ‹

**å»ºè®®**ï¼šæ·»åŠ ä¸€ä¸ªå‡½æ•°æ¥æ£€æµ‹æ˜¯å¦æ‰€æœ‰å‰©ä½™ç©å®¶éƒ½è¦ä¸èµ·ã€‚

```typescript
function checkAllRemainingPlayersPassed(
  currentPlayerIndex: number,
  players: Player[],
  playerCount: number,
  lastPlay: Play | null
): boolean {
  // æ£€æŸ¥æ‰€æœ‰å‰©ä½™ç©å®¶æ˜¯å¦éƒ½è¦ä¸èµ·
  const remainingPlayers = players.filter(p => p.hand.length > 0);
  
  if (remainingPlayers.length <= 1) {
    return false; // åªå‰©ä¸€ä¸ªç©å®¶ï¼Œä¸éœ€è¦æ£€æµ‹
  }
  
  // æ£€æŸ¥æ‰€æœ‰å‰©ä½™ç©å®¶æ˜¯å¦éƒ½æœ‰èƒ½æ‰“è¿‡çš„ç‰Œ
  const allPassed = remainingPlayers.every(player => {
    if (lastPlay === null) {
      // æ¥é£çŠ¶æ€ï¼Œåº”è¯¥èƒ½å‡ºç‰Œ
      return findPlayableCards(player.hand, null).length === 0;
    } else {
      // æœ‰ä¸Šå®¶å‡ºç‰Œï¼Œæ£€æŸ¥æ˜¯å¦èƒ½æ‰“è¿‡
      return !hasPlayableCards(player.hand, lastPlay);
    }
  });
  
  return allPassed;
}
```

---

## ğŸ“Š 5. æ€»ç»“

### âœ… æ­£ç¡®çš„éƒ¨åˆ†

1. **ç‰Œå‹è¯†åˆ«**ï¼šæ­£ç¡®è¯†åˆ«æ‰€æœ‰ç‰Œå‹
2. **å‹ç‰Œè§„åˆ™**ï¼šå¢©ã€ç‚¸å¼¹ã€åŒç±»å‹æ¯”è¾ƒè§„åˆ™æ­£ç¡®
3. **è®¡åˆ†è§„åˆ™**ï¼šåˆ†ç‰Œã€å¢©ã€è½®æ¬¡åˆ†æ•°ã€æœ€ç»ˆè®¡åˆ†éƒ½æ­£ç¡®
4. **æ¸¸æˆç»“æŸ**ï¼šå½“åªå‰©ä¸€ä¸ªç©å®¶æ—¶æ­£ç¡®ç»“æŸæ¸¸æˆ
5. **åŸºæœ¬æµç¨‹**ï¼šå‡ºç‰Œã€è¦ä¸èµ·ã€æ¥é£çš„åŸºæœ¬æµç¨‹æ­£ç¡®

### âš ï¸ éœ€è¦ä¿®å¤çš„é—®é¢˜

1. **æ¥é£çŠ¶æ€ä¸‹çš„"è¦ä¸èµ·"**ï¼šå¦‚æœæ‰€æœ‰å‰©ä½™ç©å®¶éƒ½è¦ä¸èµ·ï¼Œå¯èƒ½å¯¼è‡´æ— é™å¾ªç¯
2. **findNextActivePlayer**ï¼šå¦‚æœæ‰€æœ‰ç©å®¶éƒ½å‡ºå®Œäº†ï¼Œåº”è¯¥è¿”å› `null` å¹¶ç»“æŸæ¸¸æˆ
3. **è¾¹ç•Œæƒ…å†µ**ï¼šéœ€è¦æ·»åŠ "æ‰€æœ‰ç©å®¶éƒ½è¦ä¸èµ·"çš„æ£€æµ‹å’Œå¤„ç†

### ğŸ”§ ä¼˜å…ˆçº§

1. **é«˜ä¼˜å…ˆçº§**ï¼šä¿®å¤æ¥é£çŠ¶æ€ä¸‹çš„"è¦ä¸èµ·"å¤„ç†ï¼Œé˜²æ­¢æ— é™å¾ªç¯
2. **ä¸­ä¼˜å…ˆçº§**ï¼šæ”¹è¿› `findNextActivePlayer`ï¼Œæ·»åŠ æ‰€æœ‰ç©å®¶å‡ºå®Œçš„æ£€æµ‹
3. **ä½ä¼˜å…ˆçº§**ï¼šæ·»åŠ "æ‰€æœ‰ç©å®¶éƒ½è¦ä¸èµ·"çš„æ£€æµ‹å‡½æ•°

---

## ğŸ“ æµ‹è¯•å»ºè®®

1. **æµ‹è¯•åœºæ™¯1**ï¼šæ¥é£çŠ¶æ€ä¸‹ï¼Œæ‰€æœ‰å‰©ä½™ç©å®¶éƒ½è¦ä¸èµ·
2. **æµ‹è¯•åœºæ™¯2**ï¼šæ‰€æœ‰ç©å®¶éƒ½å‡ºå®Œç‰Œçš„æƒ…å†µ
3. **æµ‹è¯•åœºæ™¯3**ï¼šè¿ç»­å¤šè½®"è¦ä¸èµ·"çš„æƒ…å†µ
4. **æµ‹è¯•åœºæ™¯4**ï¼šå¢©ã€ç‚¸å¼¹ã€åˆ†ç‰Œçš„è®¡åˆ†æ˜¯å¦æ­£ç¡®
5. **æµ‹è¯•åœºæ™¯5**ï¼šæ¸¸æˆæ˜¯å¦èƒ½æ­£å¸¸ç»“æŸ

---

**å®¡æŸ¥æ—¥æœŸ**ï¼š2024-11-24  
**å®¡æŸ¥äºº**ï¼šAI Assistant

