# 测试管理系统使用指南

## 概述

测试管理系统可以扫描、分析、分类和优化测试代码。

## 功能特性

### 1. 测试扫描

- 自动扫描所有测试文件
- 识别测试类型（单元测试、集成测试、E2E 测试等）
- 统计测试数量和执行结果

### 2. 测试分析

- **覆盖率分析**：计算测试覆盖率
- **执行时间分析**：识别慢测试
- **失败测试检测**：找出失败的测试
- **跳过测试检测**：识别跳过的测试

### 3. 问题检测

- **缺失测试**：检测没有测试覆盖的代码
- **慢测试**：识别执行时间过长的测试
- **重复测试**：检测重复的测试用例
- **未使用测试**：识别长时间未运行的测试

### 4. 测试分类

- 单元测试
- 集成测试
- 端到端测试
- 回归测试
- 其他测试

## 使用方法

### 1. 打开测试管理器

点击右下角的 **🧪** 按钮

### 2. 扫描测试

点击 **🔄 扫描测试** 按钮，系统会：
- 扫描所有测试文件
- 分析测试结果
- 生成测试报告

### 3. 查看结果

- **统计信息**：查看总体测试指标
- **测试文件列表**：查看所有测试文件
- **问题列表**：查看测试相关问题
- **优化建议**：查看系统提供的优化建议

### 4. 按分类查看

使用分类标签可以：
- 查看所有测试
- 按测试类型过滤（单元测试、集成测试等）

## 测试类型

### 单元测试 (unit)
- **说明**：测试单个函数或组件
- **位置**：通常与源代码文件在同一目录或 `__tests__` 目录

### 集成测试 (integration)
- **说明**：测试多个组件或模块的交互
- **位置**：通常在 `tests/integration` 目录

### 端到端测试 (e2e)
- **说明**：测试完整的用户流程
- **位置**：通常在 `tests/e2e` 目录

### 回归测试 (regression)
- **说明**：测试之前修复的 bug 不会再次出现
- **位置**：通常在 `tests/regression` 目录

## 优化建议

### 1. 提高测试覆盖率

- 目标覆盖率：80% 以上
- 重点关注核心业务逻辑
- 使用覆盖率工具（如 Istanbul）

### 2. 优化慢测试

- 识别执行时间超过 5 秒的测试
- 使用 mock 和 stub 减少依赖
- 并行执行测试

### 3. 消除重复测试

- 合并重复的测试用例
- 提取公共测试逻辑
- 使用测试工厂函数

### 4. 修复失败测试

- 优先修复失败的测试
- 确保测试的稳定性和可靠性
- 定期运行测试套件

## 扩展开发

### 集成测试框架

可以集成 Vitest、Jest 等测试框架：

```typescript
import { run } from 'vitest';

const results = await run({
  // 测试配置
});
// 将测试结果转换为 TestFile
```

### 集成覆盖率工具

可以集成 Istanbul、c8 等覆盖率工具：

```typescript
import { createCoverageMap } from '@istanbuljs/coverage';

const coverage = createCoverageMap();
// 分析覆盖率数据
```

### 自定义测试分析

在 `testManagementService.ts` 中添加自定义分析逻辑：

```typescript
// 检测自定义问题
if (/* 你的检测条件 */) {
  this.issues.push({
    id: 'custom-issue',
    type: 'other',
    severity: 'warning',
    message: '自定义问题描述',
    suggestion: '修复建议',
  });
}
```

## 性能优化

1. **增量扫描**：只扫描修改过的测试文件
2. **缓存结果**：缓存测试分析结果
3. **并行分析**：使用 Web Workers 进行并行分析
4. **懒加载**：按需加载测试文件内容

## 注意事项

- 当前实现是基础版本，某些分析可能不够准确
- 建议结合测试框架和覆盖率工具获得更准确的结果
- 对于大型项目，可能需要后端支持来处理测试执行

